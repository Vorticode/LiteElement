<script type="module">
	import LiteElement from './LiteElement.js';

	class InventoryList extends LiteElement {
		addItem() {
			this.items.append(this.createEl(`
				<tr oninput="this.updateResult()">
					<td><input name="name"></td>
					<td><input name="qty" type="number"></td>
					<td>
						<button onclick="el.closest('tr').remove(); this.updateResult()">X</button>
					</td>
				</tr>
			`));
			this.updateResult();
		}

		updateResult() { // Create an array of objects, basted on input field names.
			let values = Array.from(this.items.children).map(LiteElement.getValues);
			this.result.innerHTML = JSON.stringify(values, null, 4);
		}
	}
	InventoryList.html = `
		<inventory-list>
			<button onclick="this.addItem()">Add Item</button>
			<table id="items">
				<tr><th>Name</th><th>Qty</th></tr>
			</table>
			<div id="result" style="white-space: pre"></div>
		</inventory-list>`;

	document.body.append(new InventoryList());
</script>