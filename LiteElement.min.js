export default class LiteElement extends HTMLElement{constructor(){super();let e=this.constructor,t={},i=this.innerHTML;if(e.hasSlots_)for(let e of this.querySelectorAll("[slot]"))t[e.slot]=e.innerHTML;for(let t in e.attribs_)this.hasAttribute(t)||this.setAttribute(t,e.attribs_[t]);this.innerHTML="";for(let t of e.children_)this.append(t.cloneNode(!0));e.hasEvents_&&LiteElement.activateEvents(this,this);for(let e of this.querySelectorAll("[id], [data-id]"))if(LiteElement.getLiteParent(e)===this){if(this[e.id||e.dataset.id])throw new Error(`Can't create new property on <${this.tagName.toLowerCase()}> via the attribute id="${e.id||e.dataset.id}" because the .${e.id||e.dataset.id} property already has a value.`);this[e.id||e.dataset.id]=e}if(e.hasSlots_)for(let e of this.querySelectorAll("slot"))e.innerHTML=t[e.name]||i;if(e.hasShadow_){let e=[...this.querySelectorAll("[shadow]")];"shadow"in this.attributes&&e.push(this);for(let t of e)t.shadowRoot||(t.attachShadow({mode:t.getAttribute("shadow")||"open"}),t.shadowRoot.append(...t.childNodes))}}createEl(e,t=!0){let i=createEl(e,t);return LiteElement.activateEvents(this,i),i}}LiteElement.getLiteParent=e=>{for(;e=e.parentNode;)if(e instanceof LiteElement)return e},LiteElement.getValues=e=>{let t={};for(let i of e.querySelectorAll("[name]")){let e=i.getAttribute("name");t[e]=e in t?[t[e],i.value].flat():i.value}return t},LiteElement.activateEvents=(e,t)=>{[t,...t.querySelectorAll("*")].map((t=>[...t.attributes].filter(isEvent_).map((i=>t[i.name]=r=>new Function("event","el",i.value).bind(e)(r,t)))))},Object.defineProperty(LiteElement,"html",{set:function(e){referenceDiv.innerHTML=e.trim();let t=referenceDiv.firstChild;this.children_=t.childNodes,this.hasSlots_=t.querySelector("slot"),this.hasEvents_=[...referenceDiv.querySelectorAll("*")].filter((e=>[...e.attributes].filter(isEvent_).length)).length,this.hasShadow_=referenceDiv.querySelector("[shadow]"),this.ids_=[...referenceDiv.querySelectorAll("*")],this.attribs_={};for(let e of t.attributes)this.attribs_[e.name]=e.value;customElements.define(t.tagName.toLowerCase(),this)}});let isEvent_=e=>e.name.startsWith("on")&&e.name in referenceDiv,referenceDiv=document.createElement("div");var createElCache={},template=document.createElement("template");function createEl(e,t=!0){t&&(e=e.trim());let i=createElCache[e];return i?i.cloneNode(!0):(template.innerHTML=e,template.content.querySelector("slot")||(createElCache[e]=template.content.firstChild.cloneNode(!0)),template.content.removeChild(template.content.firstChild))}
